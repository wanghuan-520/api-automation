# 后端框架升级 - 接口测试优先级指南

## 🚨 核心业务接口（必须测试）

### 1. 高频核心接口 - 优先级：🔥 最高
| 接口路径 | 测试场景 | 影响范围 | 测试重点 |
|---------|---------|----------|----------|
| `POST /api/gotgpt/chat` | AI聊天核心功能 | 所有用户 | 消息发送、流式响应、错误处理 |
| `GET /api/godgpt/account` | 用户信息获取 | 所有登录用户 | 用户数据完整性、权限验证 |
| `PUT /api/godgpt/account` | 用户信息更新 | 所有登录用户 | 数据更新、验证逻辑 |
| `POST /api/godgpt/create-session` | 会话创建 | 所有用户 | 会话ID生成、权限验证 |
| `GET /api/godgpt/session-list` | 会话列表 | 所有登录用户 | 数据分页、排序、权限 |

### 2. 认证相关接口 - 优先级：🔥 最高
| 接口路径 | 测试场景 | 影响范围 | 测试重点 |
|---------|---------|----------|----------|
| `POST /api/account/check-email-registered` | 邮箱注册检查 | 新用户注册 | 邮箱验证逻辑 |
| `GET /api/account/logout` | 用户登出 | 所有登录用户 | 会话清理、token失效 |
| JWT认证流程 | 所有需要认证的接口 | 所有登录用户 | Token验证、刷新机制 |

## ⚠️ 重要业务接口（高优先级测试）

### 3. 支付系统接口 - 优先级：⚠️ 高
| 接口路径 | 测试场景 | 影响范围 | 测试重点 |
|---------|---------|----------|----------|
| `GET /api/godgpt/payment/products` | 产品列表 | 付费用户 | 产品信息、价格数据 |
| `POST /api/godgpt/payment/verify-receipt` | 收据验证 | 付费用户 | 支付验证、订阅状态 |
| `POST /api/godgpt/payment/create-checkout-session` | 结账会话 | Web付费用户 | Stripe集成、支付流程 |
| `GET /api/godgpt/payment/has-apple-subscription` | Apple订阅检查 | iOS付费用户 | 订阅状态验证 |

### 4. 会话管理接口 - 优先级：⚠️ 高
| 接口路径 | 测试场景 | 影响范围 | 测试重点 |
|---------|---------|----------|----------|
| `GET /api/godgpt/chat/{sessionId}` | 聊天历史 | 所有用户 | 历史数据完整性、权限 |
| `DELETE /api/godgpt/chat/{sessionId}` | 删除会话 | 所有用户 | 数据删除、权限验证 |
| `GET /api/godgpt/session-info/{sessionId}` | 会话信息 | 所有用户 | 会话元数据、权限 |

### 5. 访客模式接口 - 优先级：⚠️ 高
| 接口路径 | 测试场景 | 影响范围 | 测试重点 |
|---------|---------|----------|----------|
| `POST /api/godgpt/guest/create-session` | 访客会话创建 | 未登录用户 | 会话限制、数据隔离 |
| `POST /api/godgpt/guest/chat` | 访客聊天 | 未登录用户 | 功能限制、数据安全 |

## 📊 功能业务接口（中优先级测试）

### 6. 邀请奖励系统 - 优先级：📊 中
| 接口路径 | 测试场景 | 影响范围 | 测试重点 |
|---------|---------|----------|----------|
| `GET /api/godgpt/invitation/info` | 邀请信息 | 所有用户 | 邀请码生成、统计 |
| `POST /api/godgpt/invitation/redeem` | 邀请码兑换 | 新用户 | 兑换逻辑、积分奖励 |
| `GET /api/godgpt/invitation/credits/history` | 积分历史 | 所有用户 | 积分记录、分页 |

### 7. 分享功能接口 - 优先级：📊 中
| 接口路径 | 测试场景 | 影响范围 | 测试重点 |
|---------|---------|----------|----------|
| `GET /api/godgpt/share/keyword` | 分享关键词 | 所有用户 | 关键词生成、权限 |
| `GET /api/godgpt/share/{shareId}` | 分享内容 | 所有用户 | 内容访问、权限控制 |

### 8. 音频功能接口 - 优先级：📊 中
| 接口路径 | 测试场景 | 影响范围 | 测试重点 |
|---------|---------|----------|----------|
| `POST /api/godgpt/voice/chat` | 语音聊天 | 高级用户 | 音频处理、流式响应 |

## 🔧 系统管理接口（低优先级测试）

### 9. 系统配置接口 - 优先级：🔧 低
| 接口路径 | 测试场景 | 影响范围 | 测试重点 |
|---------|---------|----------|----------|
| `GET /api/godgpt/configuration/system-prompt` | 获取系统提示词 | 管理员 | 配置读取、权限 |
| `POST /api/godgpt/configuration/system-prompt` | 更新系统提示词 | 管理员 | 配置更新、权限验证 |
| `GET /api/godgpt/query-version` | 版本检查 | 所有用户 | 版本比较逻辑 |

## 🧪 测试策略建议

### 测试优先级矩阵

| 优先级 | 接口数量 | 测试策略 | 预计时间 |
|--------|---------|----------|----------|
| **🔥 最高** | 8个 | 自动化测试 + 手动验证 | 2-3天 |
| **⚠️ 高** | 12个 | 自动化测试 | 3-4天 |
| **📊 中** | 8个 | 手动测试 + 抽样自动化 | 2-3天 |
| **🔧 低** | 5个 | 手动测试 | 1天 |

### 测试检查清单

#### 🔥 核心接口测试项
- [ ] 正常流程测试
- [ ] 异常情况处理
- [ ] 权限验证
- [ ] 数据完整性
- [ ] 性能测试
- [ ] 并发测试

#### ⚠️ 重要接口测试项
- [ ] 功能完整性
- [ ] 错误处理
- [ ] 数据验证
- [ ] 集成测试

#### 📊 功能接口测试项
- [ ] 基本功能
- [ ] 边界条件
- [ ] 用户体验

### 回归测试重点

1. **认证流程完整性**
   - 登录/登出
   - Token刷新
   - 权限验证

2. **数据一致性**
   - 用户信息同步
   - 会话数据完整性
   - 支付状态同步

3. **性能指标**
   - 响应时间
   - 并发处理能力
   - 错误率

4. **兼容性测试**
   - 不同平台（Web/iOS/Android）
   - 不同网络环境
   - 不同设备类型

## 🚀 部署建议

### 分阶段部署
1. **第一阶段**：部署核心接口（认证、聊天）
2. **第二阶段**：部署重要接口（支付、会话管理）
3. **第三阶段**：部署功能接口（邀请、分享）
4. **第四阶段**：部署系统接口（配置、版本）

### 监控指标
- API响应时间
- 错误率
- 用户活跃度
- 支付成功率
- 系统资源使用率 