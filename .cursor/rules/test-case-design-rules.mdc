---
description: 
globs: 
alwaysApply: false
---
先输出"!!!进入测试用例设计流程!!!"

# 接口测试用例设计规范

## 1. CSV文件结构规范

### 1.1 基本要求
- 必须包含表头行，字段顺序固定
- 使用UTF-8编码
- 使用逗号(,)作为分隔符
- 换行符使用LF(\n)
- 文件扩展名为.csv

### 1.2 字段定义表
| 字段名 | 类型 | 必填 | 格式要求 |
|--------|------|------|----------|
| 用例编号 | 字符串 | 是 | [模块]-[类型]-[序号]，如：USER-FUNC-001 |
| 接口功能描述 | 字符串 | 是 | 简明描述测试场景 |
| URL | 字符串 | 是 | 完整路径或相对路径 |
| 请求类型 | 枚举 | 是 | GET/POST/PUT/DELETE/PATCH |
| Headers | JSON字符串 | 否 | 使用双引号转义，如：{"Content-Type":"application/json"} |
| 测试数据/参数 | JSON字符串 | 否 | 复杂参数使用JSON格式 |
| 预期结果 | 字符串 | 是 | 多断言用分号分隔，如：状态码:200; 响应体包含:token |
| 优先级 | 枚举 | 是 | P0(最高)-P3(最低) |
| 备注 | 字符串 | 否 | 特殊说明事项 |

## 2. 测试场景分类规范

### 2.1 功能测试场景标记 [FUNC]
- 正常流程测试
  - [NOR] - 基础正常流程
  - [NOR-STD] - 标准输入验证
  - [NOR-FLOW] - 完整业务流程
  - [NOR-DATA] - 数据一致性检查

- 异常流程测试
  - [ERR] - 基础异常流程
  - [ERR-MISS] - 参数缺失
  - [ERR-INV] - 参数无效
  - [ERR-BOUND] - 参数边界值
  - [ERR-RULE] - 业务规则违反

### 2.2 安全测试场景标记 [SEC]
- 认证授权测试
  - [SEC-AUTH] - 基础认证测试
  - [SEC-AUTH-TOKEN] - Token验证
  - [SEC-AUTH-PERM] - 权限控制
  - [SEC-AUTH-SESS] - 会话管理

- 数据安全测试
  - [SEC-DATA] - 基础数据安全
  - [SEC-DATA-INJ] - 注入攻击防护
  - [SEC-DATA-SQL] - SQL注入防护
  - [SEC-DATA-XSS] - XSS攻击防护

## 3. 内容编写规范

### 3.1 基本原则
1. 每个测试用例必须属于明确的测试场景分类
2. 预期结果必须包含状态码验证
3. 安全测试用例必须包含攻击向量描述
4. 参数值边界测试需标注边界条件
5. 业务规则测试需标注违反的具体规则

### 3.2 编写要求
1. 用例编号必须唯一且符合命名规范
2. 接口功能描述应简洁明了
3. URL必须准确完整
4. Headers和参数必须使用有效的JSON格式
5. 预期结果必须清晰可验证

## 4. CSV模板示例
- 测试点专用CSV文件，包含所有测试场景分类和对应的测试点说明，可作为测试用例编写的参考索引
测试点ID,测试分类,测试子类,测试点描述,适用接口,验证要点,示例参数
NOR-FLOW-001,功能测试,正常流程,完整业务流程验证,所有接口,验证端到端业务逻辑,-
NOR-STD-001,功能测试,正常流程,标准输入验证,带参数接口,必填参数验证,{"param":"standard"}
NOR-DATA-001,功能测试,正常流程,数据一致性检查,数据返回接口,字段类型和格式验证,-
ERR-MISS-001,功能测试,异常流程,参数缺失测试,带参数接口,必填参数缺失验证,{"param1":"value"} (缺少param2)
ERR-MISS-002,功能测试,异常流程,参数组合缺失测试,带参数接口,多个必填参数组合缺失验证,{"param1":"value"} (缺少param2和param3)
ERR-MISS-003,功能测试,异常流程,嵌套参数缺失测试,复杂参数接口,嵌套对象中必填字段缺失验证,{"parent":{"child1":"value"}} (缺少child2)
ERR-EMPTY-001,功能测试,异常流程,空字符串参数测试,带参数接口,参数值为空字符串验证,{"param":""}
ERR-EMPTY-002,功能测试,异常流程,多个空字符串参数测试,带参数接口,多个参数同时为空字符串验证,{"param1":"","param2":""}
ERR-EMPTY-003,功能测试,异常流程,嵌套空字符串参数测试,复杂参数接口,嵌套对象中字段为空字符串验证,{"parent":{"child":""}}
ERR-INV-001,功能测试,异常流程,参数无效测试,带参数接口,参数格式错误验证,{"email":"invalid_format"}
ERR-BOUND-001,功能测试,异常流程,参数边界值测试,带参数接口,边界条件验证,{"age":0},{"age":200}
ERR-RULE-001,功能测试,异常流程,业务规则违反,业务接口,业务逻辑错误验证,{"balance":-50}
SEC-AUTH-TOKEN-001,安全测试,认证授权,Token验证,需认证接口,无Token/无效Token访问,-
SEC-AUTH-PERM-001,安全测试,认证授权,权限控制,权限接口,越权访问验证,{"Authorization":"other_role_token"}
SEC-AUTH-SESS-001,安全测试,认证授权,会话管理,会话接口,过期会话访问验证,{"Cookie":"expired_session"}
SEC-DATA-INJ-001,安全测试,数据安全,注入攻击防护,所有输入接口,SQL注入尝试,{"query":"' OR 1=1--"}
SEC-DATA-SQL-001,安全测试,数据安全,SQL注入防护,数据库相关接口,SQL错误信息泄露检查,{"username":"admin'--"}
SEC-DATA-XSS-001,安全测试,数据安全,XSS攻击防护,所有输入接口,XSS攻击尝试,{"content":"<script>alert(1)</script>"}
SEC-DATA-LEAK-001,安全测试,数据安全,敏感信息泄露,所有响应接口,敏感字段过滤检查,-
PERF-RESP-001,性能测试,响应时间,常规响应时间,所有接口,响应时间阈值验证,-
PERF-LOAD-001,性能测试,负载测试,并发请求处理,核心接口,高并发场景验证,-
SEC-INJ-001,安全测试,注入攻击,SQL注入测试,数据接口,SQL注入防护验证,{"id":"1' OR '1'='1"}
SEC-INJ-002,安全测试,注入攻击,XSS注入测试,内容接口,XSS防护验证,{"content":"<script>alert(1)</script>"}
SEC-LIMIT-001,安全测试,访问控制,频率限制测试,所有接口,访问频率限制验证,-

```csv
用例编号,接口功能描述,URL,请求类型,Headers,测试数据/参数,预期结果,优先级,备注
USER-FUNC-001,用户登录成功,/api/login,POST,{"Content-Type":"application/json"},{"username":"valid","password":"P@ssw0rd"},状态码:200; 响应体包含:token,P1,标准登录流程
USER-ERR-002,用户登录-密码错误,/api/login,POST,{"Content-Type":"application/json"},{"username":"test","password":"wrong"},状态码:401; 响应体:{"code":"AUTH_FAILED"},P2,验证密码错误处理
USER-SEC-003,登录SQL注入尝试,/api/login,POST,{"Content-Type":"application/json"},{"username":"admin'--","password":"any"},状态码:400; 响应体不包含:SQL错误,P0,SQL注入防护验证
```

## 5. 最佳实践建议

### 5.1 用例组织
- 按功能模块分组组织用例
- 相关场景用例应当连续排列
- 优先级高的用例应当优先排列

### 5.2 数据设计
- 使用有意义的测试数据
- 边界值测试应覆盖上下限
- 参数组合应考虑互斥条件

### 5.3 预期结果设计
- 状态码验证必须精确
- 响应内容验证应具体
- 多个验证点使用分号分隔
- 验证规则应可自动化执行